== Redis 如何实现 键值 的匹配

* Redis 使用 哈希表 来保存键值对， 所以 查找的效率很快, 是 O(1)

* 哈希表 的 值 是实际存储的数据类型的指针

=== 哈希表冲突和rehash

* Redis 使用链表来解决hash冲突问题

* 为了避免哈希冲突问题导致的查询慢问题，Redis会使用 *rehash* 来解决

** Redis 中有2个全局 哈希表, 哈希表1 和 哈希表2，平常只使用 哈希表1

** 当数据项逐渐增多的时候，开始 *rehash*, 将hash表2扩容为哈希表1的2倍，将hash表1的数据复制过去

** 之后就只使用哈希表2，释放哈希表1的空间

** 复制的数据的过程可能造成 Redis 阻塞

* Redis 为了避免 *rehash* 数据copy可能造成的阻塞，实际上使用的是渐进式的 *rehash*

** 在哈希表2扩容完成后的时候，渐进式的拷贝数据，在处理请求的时候，把请求的数据拷贝到哈希表2上，从而将拷贝时的性能开销分摊到每次请求上
