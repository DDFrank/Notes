== 时间序列数据的读写特点

=== 写的特点

* 一般 create 后不再 update

* 所以要求插入速度快

=== 读的特点

* 有单条记录的查询需求

* 有对某个时间范围的查询需求

* 有对数据做各种聚合计算的要求1

== 如何用 Redis 实现

=== 基于 hash 和 zset 实现

* redis 内建的数据类型，比较成熟和稳定

* 为了让 插入操作是原子的，可以使用 *pipline*, *multi*, *exec* 指令

* 聚合计算只能在客户端完成

* 数据量大时，拓展十分不方便，仅适用于小项目

=== 基于 RedisTimeSeries 模块保存时间序列数据

* 非内建模块，需要把它的源码单独编译成动态链接库redistimeseries.so，再使用loadmodule命令进行加载

* 有以下操作

** 用TS.CREATE命令创建时间序列数据集合；

** 用TS.ADD命令插入数据；

** 用TS.GET命令读取最新数据；

** 用TS.MGET命令按标签过滤查询数据集合；

** 用TS.RANGE支持聚合计算的范围查询。

* 使用云服务商提供的redis，很有可能用不了这个

* 还是用专业的时序数据库吧